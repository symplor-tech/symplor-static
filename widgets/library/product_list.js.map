{"version":3,"file":"product_list.js","mappings":"YAAA,MAqOMA,EAAmBC,GAASA,EAAIC,SAAS,KAAO,IAAM,IA+EtDC,EAAU,EAAGC,KAAAA,EAAMC,OAAAA,EAAS,OAChC,IAAIC,EAAe,GAMnB,OALIC,MAAMC,QAAQJ,IAChBA,EAAKK,SAASC,IACZJ,GA9Dc,EAACF,EAAMC,IACjBM,gBAAmB,kGApBK,EAACV,EAAKW,KACtC,IAAKX,GAAsB,iBAARA,EACjB,OAAOA,EAET,IAAIY,EAAWZ,EACf,MAAM,gBAAEa,EAAF,IAAmBC,GAAQH,EAWjC,OAVIG,IACFF,GAAYb,EAAgBC,GAC5BY,GAAa,OAAME,KAEjBD,IACFD,EAAY,GAAEC,IAAkBd,EAC9Bc,SACME,mBAAmBH,MAGtBA,GAKUI,CACTb,EAAKH,IACLI,EAAOO,2bAMCR,EAAKc,8CAC+Bd,EAAKe,iBACvDf,EAAKe,8JAKqCf,EAAKe,6BAEnCf,EAAKgB,UACA,uCACChB,EAAKgB,UAAUC,MAAM,KAAKC,SACzBjB,EAAOe,WAAa,mBACvB,soBAOFhB,EAAKmB,0UAO2CnB,EAAKoB,MAAMC,gFACvBrB,EAAKsB,UAAUD,oJAG7CrB,EAAKuB,waAqBPC,CAAYlB,EAAML,MAG9B,yBACNA,EAAOwB,SAAY,8EACsCvB,WA2F7D,IAAIwB,EAAkB,KAqCtBC,OAAOC,QAAUD,OAAOC,SAAW,CAAEC,WAAY,IACjDF,OAAOC,QAAQC,WAAWC,aAfLC,IAAU,MAK7B,MAJ8B,YAA1BA,MAAAA,GAAA,UAAAA,EAAO9B,cAAP,eAAe+B,SAtBA,MACnB,MAAMC,EAAWC,SAASC,cAAc,UAClCC,EACJ,8EACFH,EAASI,IAAMD,EACfH,EAASK,GAAKF,EAEdV,EAAkB,IAAIa,SAAQ,CAACC,EAASC,KACtCR,EAASS,iBAAiB,QAAQ,KAChCC,YAAW,KACTH,UAGJP,EAASS,iBAAiB,SAAUE,IAClCH,EAAOG,SAIXV,SAASW,KAAKC,YAAYb,IAKxBc,GAGK,CACLC,OArbY,qnJAsbZC,KAAMlD,EAAQgC,GACdmB,OAASC,IAvCI,EAACA,EAAIpB,KAAU,MArD9BqB,eAAiB,IAAIC,sBAClBC,IACCA,EAAQjD,SAASkD,IAEbA,IACCA,EAAaC,gBAAkBD,EAAaE,kBAAoB,KAEjEL,eAAeM,UAAUH,EAAaI,QACtCJ,EAAaI,OAAOC,aAClB,MACAL,EAAaI,OAAOE,aAAa,2BAKzC,CAAEC,WAAY,4BAEhB5B,SAAS6B,iBAAiB,yBAAyB1D,SAAS2D,IAC1DZ,eAAea,QAAQD,MAsCK,YAA1BjC,MAAAA,GAAA,UAAAA,EAAO9B,cAAP,eAAe+B,UAlFfN,EACFA,EACGwC,MAAK,KAEJC,IAAI,CACFC,UAAWlC,SAASmC,cAAc,0BAClCC,MAAO,EACPC,QAAS,OACTC,UAAU,EACVC,OAAQ,EACRC,UAAU,EACVC,oBAAoB,EACpBC,sBAAsB,EACtBC,KAAK,OAGRC,OAAOC,IACNC,QAAQC,IAAI,sDAAwDF,MAGxEC,QAAQC,IAAI,qDAmGVC,CAAS/B,EAAIpB,M","sources":["webpack://widgets-library/./src/components/organisms/ProductList/ProductList.js"],"sourcesContent":["const styles = `  \r\nbody {padding:0;margin:0}\r\n.tns-outer {\r\n  width: 100%;\r\n  overflow: hidden;\r\n}\r\n.s_w_title {margin-bottom: 12px; font-size: 16px; text-transform: uppercase; color: black;}\r\n.tns-liveregion{ display:none} \r\n.ProductList_container {\r\n  display: flex;\r\n}\r\n.ProductList_container a {\r\n  text-decoration: none;\r\n}\r\n.ProductCard_card {\r\n  position: relative;\r\n  /* height: 90px; */\r\n}\r\n.ProductCard_inner {\r\n  padding: 4px;\r\n  background: #f6f6f6;\r\n  align-items: center;\r\n  flex-flow: row;\r\n  flex-wrap: wrap;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  border: 1px solid #ececec;\r\n  border-radius: 4px;\r\n  background-clip: padding-box;\r\n  position: relative;\r\n}\r\n.ProductCard_product_img {\r\n  margin: 0px 12px 0px 0px;\r\n  background: #fff;\r\n  -moz-box-flex: 0;\r\n  flex: 0 0 75px;\r\n  position: relative;\r\n  height: 50px;\r\n  overflow: hidden;\r\n  top: -8px;\r\n}\r\n.ProductCard_product_img::before {\r\n  display: block;\r\n  content: \"\";\r\n  width: 100%;\r\n  padding-top: 75%;\r\n}\r\n.ProductCard_content {\r\n  margin: 0;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow: hidden;\r\n  height: 100%;\r\n  background-color: #f6f6f6;\r\n  padding: 0;\r\n}\r\n.ProductCard_content img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: contain;\r\n}\r\n.ProductCard_product_details {\r\n  position: relative;\r\n  top: -4px;\r\n  width: calc(100% - 155px);\r\n  flex: calc(100% - 155px) 1;\r\n  display: -moz-box;\r\n  display: flex;\r\n  -moz-box-orient: vertical;\r\n  -moz-box-direction: normal;\r\n  flex-flow: column;\r\n}\r\n.ProductCard_title {\r\n  font: 700 11px/20px futura, sans-serif;\r\n  height: 20px;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 1;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n  color: #1a1a1a;\r\n  margin-bottom: 4px;\r\n}\r\n.ProductCard_rating_with_logo {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin: 0;\r\n}\r\n.ProductCard_col {\r\n  bottom: 6px;\r\n  max-width: 100%;\r\n  position: absolute;\r\n  right: 12px;\r\n  z-index: 3;\r\n}\r\n.ProductCard_col img {\r\n  height: 12px;\r\n  width: auto;\r\n  max-width: 100%;\r\n}\r\n.ProductCard_price_cta_box {\r\n  flex-flow: row;\r\n  align-items: center;\r\n  margin-top: auto;\r\n  padding: 4px 0;\r\n  display: flex;\r\n  /* flex-flow: column; */\r\n  justify-content: space-between;\r\n}\r\n.ProductCard_pricewrapper {\r\n  flex: 1 1;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.ProductCard_mrp {\r\n  margin: 0;\r\n  top: 1px;\r\n  font: 500 10px/20px futura, sans-serif;\r\n  display: block;\r\n  color: #ef6c00;\r\n}\r\n.ProductCard_original_price {\r\n  display: flex;\r\n  height: 24px;\r\n  font: normal 12px/16px futura, sans-serif;\r\n  margin: 0;\r\n  color: #1a1a1a;\r\n  white-space: nowrap;\r\n  align-items: center;\r\n}\r\n.ProductCard_original_price span.ProductCard_mrp:not(:empty):before {\r\n  content: \"₹\";\r\n  padding-right: 2px;\r\n}\r\n.ProductCard_original_price .ProductCard_mrp {\r\n  font: normal 10px/16px futura, sans-serif;\r\n  margin: 0;\r\n  top: 1px;\r\n  position: relative;\r\n  text-decoration: line-through;\r\n  padding-right: 5px;\r\n  color: #1a1a1a;\r\n  display: block;\r\n}\r\n\r\n.ProductCard_discount_price {\r\n  font: 600 14px/24px futura, sans-serif;\r\n  color: #ff0000;\r\n  margin-right: 8px;\r\n}\r\n.ProductCard_discount_price:not(:empty):before {\r\n  content: \"₹\";\r\n  padding-right: 2px;\r\n}\r\n\r\n.ProductCard_offer_text {\r\n  font: 500 10px/18px futura, sans-serif;\r\n  text-align: left;\r\n  color: #fff;\r\n  height: 18px;\r\n  display: inline-block;\r\n  padding: 0 8px;\r\n  border-radius: 2px;\r\n  background: #b5b5b5;\r\n  overflow: hidden;\r\n  max-width: 46px;\r\n}\r\n.ProductCard_logo_cta_container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-wrap: nowrap;\r\n  -moz-box-align: center;\r\n  align-items: center;\r\n  min-height: 18px;\r\n}\r\n.ProductCard_logo_cta_container .ProductCard_cta {\r\n  display: none;\r\n}\r\n.ProductCard_product_details\r\n  .ProductCard_rating_with_logo\r\n  .ProductCard_text {\r\n  display: flex;\r\n  align-items: center;\r\n  position: absolute;\r\n  z-index: 9;\r\n  top: auto;\r\n  right: auto;\r\n  font: 600 10px/12px futura, sans-serif;\r\n  color: #4e720f;\r\n  background-color: white;\r\n  padding: 4px;\r\n  border-radius: 8px 0 0 2px;\r\n  bottom: 1px;\r\n  right: auto;\r\n  left: -90px;\r\n}\r\n.ProductCard_text img {\r\n  height: 10px;\r\n  width: 10px;\r\n  margin-right: 4px;\r\n}\r\n\r\n.ProductCard_new_offer {\r\n  width: auto;\r\n  padding: 4px;\r\n  color: #fff;\r\n  border-radius: 0 8px 2px 0;\r\n  background-clip: padding-box;\r\n  background: #ff0000;\r\n  position: absolute;\r\n  left: 0px;\r\n  text-transform: uppercase;\r\n  font: normal 10px/14px futura, sans-serif;\r\n  display: flex;\r\n  height: auto;\r\n  align-items: center;\r\n  position: relative;\r\n  flex-flow: row;\r\n  order: -1;\r\n  top: 1px;\r\n  margin-right: 4px;\r\n}\r\n.ProductCard_offer_inner {\r\n  font: 600 12px/14px futura, sans-serif;\r\n}\r\n`\r\n\r\nconst getURLSeparator = (url) => (url.includes('?') ? '&' : '?')\r\n\r\nconst getIntermediateURLWithTag = (url, intermediateURLConfig) => {\r\n  if (!url || typeof url !== 'string') {\r\n    return url\r\n  }\r\n  let finalURL = url\r\n  const { intermediateURL, tag } = intermediateURLConfig\r\n  if (tag) {\r\n    finalURL += getURLSeparator(url)\r\n    finalURL += `tag=${tag}`\r\n  }\r\n  if (intermediateURL) {\r\n    finalURL = `${intermediateURL}${getURLSeparator(\r\n      intermediateURL\r\n    )}url=${encodeURIComponent(finalURL)}`\r\n  }\r\n\r\n  return finalURL\r\n}\r\n\r\nconst getCardHTML = (data, config) => {\r\n  return (productCardHTML = `<div class=\"js-card ProductCard_card ProductCardList_card ProductCard_web\" >\r\n        <a href=\"${getIntermediateURLWithTag(\r\n          data.url,\r\n          config.intermediateURLConfig\r\n        )}\" rel=\"noopener nofollow noreferrer sponsored\" class=\"\" target=\"_blank\" >\r\n          <div class=\"ProductCard_inner ProductCard_vertical_slim ProductCard_full_width\" >\r\n            <figure class=\"ProductCard_product_img\">\r\n              <div class=\"ProductCard_content\">\r\n                <img style=\"width:100%\" src=\"data:image/gif;base64,R0lGODlhAQABAPAAAMzMzAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\" data-symplor-src=\"${\r\n                  data.imageURL\r\n                }\" class=\"ProductCard_contain\" alt=\"${data.title}\" title=\"${\r\n    data.title\r\n  }\" />\r\n              </div>\r\n            </figure>\r\n            <div class=\"ProductCard_product_details\">\r\n              <h5 class=\"ProductCard_title\">${data.title}</h5>\r\n              ${\r\n                data.offerText\r\n                  ? `<div class=\"ProductCard_offer_text\">${\r\n                      data.offerText.split('|').length\r\n                    }${config.offerText || '+ offers'}</div>`\r\n                  : ''\r\n              } \r\n              <div class=\"ProductCard_rating_with_logo\">\r\n                <span class=\"ProductCard_col\">\r\n                  <img src=\"data:image/gif;base64,R0lGODlhAQABAPAAAMzMzAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\" data-symplor-src=\"https://static.symplor.com/images/affiliates/amazon-logo.png\" class=\"ProductCard_logo ProductCard_logo_height\" alt=\"Logo\" title=\"Logo\" />\r\n                </span>\r\n                <span class=\"ProductCard_text\"><img title=\"star\" src=\"data:image/gif;base64,R0lGODlhAQABAPAAAMzMzAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\" data-symplor-src=\"https://static.symplor.com/images/affiliates/star.svg\" alt=\"star\">${\r\n                  data.starRating\r\n                }</span>\r\n              </div>\r\n              <div class=\"ProductCard_price_cta_box\">\r\n                <div class=\"ProductCard_pricewrapper\">\r\n                  <div class=\"ProductCard_mrp\">\r\n                    <div class=\"ProductCard_original_price\">\r\n                      <span class=\"ProductCard_discount_price\" >${data.price.toLocaleString()}</span>\r\n                      <span class=\"ProductCard_mrp\">${data.listPrice.toLocaleString()}</span>\r\n                      <span class=\"ProductCard_new_offer\">\r\n                      <span class=\"ProductCard_offer_inner\">${\r\n                        data.discount\r\n                      }<i>%</i> </span>Off</span>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                </div>\r\n                <div class=\"ProductCard_logo_cta_container\">\r\n                  <span></span>\r\n                  <button type=\"button\" class=\"ProductCard_cta\">Buy Now</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </a>\r\n      </div>`)\r\n}\r\n\r\nconst getHTML = ({ data, config = {} }) => {\r\n  let productsHTML = ''\r\n  if (Array.isArray(data)) {\r\n    data.forEach((item) => {\r\n      productsHTML += getCardHTML(item, config)\r\n    })\r\n  }\r\n  return `<h3 class=\"s_w_title\">${\r\n    config.heading || `Today's Top Deals`\r\n  }</h3><div class=\"ProductList_container ProductList_web\">${productsHTML}</div>`\r\n}\r\n\r\nconst enableSlider = () => {\r\n  if (sliderJSPromise) {\r\n    sliderJSPromise\r\n      .then(() => {\r\n        debugger\r\n        tns({\r\n          container: document.querySelector('.ProductList_container'),\r\n          items: 1,\r\n          slideBy: 'page',\r\n          autoplay: true,\r\n          gutter: 8,\r\n          controls: false,\r\n          autoplayHoverPause: true,\r\n          autoplayButtonOutput: false,\r\n          nav: false,\r\n        })\r\n      })\r\n      .catch((err) => {\r\n        console.log('Symplor Widgets :: failed to load slider script :: ' + err)\r\n      })\r\n  } else {\r\n    console.log('Symplor Widgets :: failed to load slider script')\r\n  }\r\n}\r\n\r\nconst handleLazyImages = () => {\r\n  // if ('IntersectionObserver' in window) {\r\n  inViewObserver = new IntersectionObserver(\r\n    (entries) => {\r\n      entries.forEach((entryToCheck) => {\r\n        if (\r\n          entryToCheck &&\r\n          (entryToCheck.isIntersecting || entryToCheck.intersectionRatio > 0)\r\n        ) {\r\n          inViewObserver.unobserve(entryToCheck.target)\r\n          entryToCheck.target.setAttribute(\r\n            'src',\r\n            entryToCheck.target.getAttribute('data-symplor-src')\r\n          )\r\n        }\r\n      })\r\n    },\r\n    { rootMargin: '100px 100px 100px 100px' }\r\n  )\r\n  document.querySelectorAll('img[data-symplor-src]').forEach((img) => {\r\n    inViewObserver.observe(img)\r\n  })\r\n  // }\r\n}\r\n\r\nfunction sendGA(eventData = {}) {\r\n  var name = eventData.name\r\n  var params = eventData.params || {}\r\n  if (typeof window !== undefined && typeof window.gtag === 'function') {\r\n    window.gtag('event', name, {\r\n      ...params,\r\n      pp_url: window.top?.location?.href,\r\n    })\r\n  }\r\n}\r\n\r\nconst bindGA = () => {\r\n  productListEl.addEventListener('click', (event) => {\r\n    const cardEl = event.target.closest('.js-card')\r\n    if (cardEl) {\r\n      try {\r\n        sendGA({\r\n          name: 'amazon_click',\r\n          params: {\r\n            action: 'Product_List_MREC',\r\n            amazon_url: cardEl.querySelector('a').getAttribute('href'),\r\n          },\r\n        })\r\n      } catch (err) {\r\n        console.log('Symplor: error during ga call')\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst didMount = (el, props) => {\r\n  // bindGA(el);\r\n  handleLazyImages()\r\n  if (props?.config?.layout === 'slider') {\r\n    enableSlider()\r\n  }\r\n}\r\n\r\nlet sliderJSPromise = null\r\n\r\nconst loadSliderJS = () => {\r\n  const scriptEL = document.createElement('script')\r\n  const scriptSrc =\r\n    'https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.2/min/tiny-slider.js'\r\n  scriptEL.src = scriptSrc\r\n  scriptEL.id = scriptSrc\r\n\r\n  sliderJSPromise = new Promise((resolve, reject) => {\r\n    scriptEL.addEventListener('load', () => {\r\n      setTimeout(() => {\r\n        resolve()\r\n      })\r\n    })\r\n    scriptEL.addEventListener('error', (e) => {\r\n      reject(e)\r\n    })\r\n  })\r\n\r\n  document.head.appendChild(scriptEL)\r\n}\r\n\r\nconst ProductList = (props) => {\r\n  if (props?.config?.layout === 'slider') {\r\n    loadSliderJS()\r\n  }\r\n\r\n  return {\r\n    styles,\r\n    html: getHTML(props),\r\n    onLoad: (el) => {\r\n      didMount(el, props)\r\n    },\r\n  }\r\n}\r\n\r\nwindow.symplor = window.symplor || { components: {} }\r\nwindow.symplor.components.product_list = ProductList\r\n"],"names":["getURLSeparator","url","includes","getHTML","data","config","productsHTML","Array","isArray","forEach","item","productCardHTML","intermediateURLConfig","finalURL","intermediateURL","tag","encodeURIComponent","getIntermediateURLWithTag","imageURL","title","offerText","split","length","starRating","price","toLocaleString","listPrice","discount","getCardHTML","heading","sliderJSPromise","window","symplor","components","product_list","props","layout","scriptEL","document","createElement","scriptSrc","src","id","Promise","resolve","reject","addEventListener","setTimeout","e","head","appendChild","loadSliderJS","styles","html","onLoad","el","inViewObserver","IntersectionObserver","entries","entryToCheck","isIntersecting","intersectionRatio","unobserve","target","setAttribute","getAttribute","rootMargin","querySelectorAll","img","observe","then","tns","container","querySelector","items","slideBy","autoplay","gutter","controls","autoplayHoverPause","autoplayButtonOutput","nav","catch","err","console","log","didMount"],"sourceRoot":""}